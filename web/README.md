# DeepBook V3 订单清理工具 - Web UI

一个美观的 Web 界面，用于扫描和清理 DeepBook V3 池子中的过期订单。

## 功能特性

- ✨ 现代化的深色主题界面
- 🔐 安全的私钥管理（仅在浏览器本地处理）
- 📊 实时进度显示
- 🔍 池子订单扫描
- 🚀 批量交易执行
- 💰 存储费返还计算
- 📱 响应式设计，支持移动端

## 快速开始

### 1. 安装依赖

```bash
npm install
```

### 2. 启动开发服务器

```bash
npm run web:dev
```

浏览器会自动打开 `http://localhost:3000`

### 3. 配置参数

在 Web 界面中填写：
- **网络**: 选择 Mainnet/Testnet/Devnet
- **池子 ID**: DeepBook V3 Pool 对象 ID
- **私钥**: Base64 格式的私钥
- **扫描限制**: 最多扫描的订单数量

### 4. 开始扫描

点击"开始扫描"按钮，系统会：
1. 连接到 Sui 网络
2. 扫描池子中的订单
3. 过滤出过期订单
4. 计算预计返还金额

### 5. 执行清理

如果找到过期订单，点击"执行清理交易"按钮：
1. 构建批量清理交易
2. 使用您的私钥签名
3. 提交到区块链
4. 显示执行结果和实际返还

## 构建生产版本

```bash
npm run web:build
```

构建产物会输出到 `dist-web/` 目录。

## 预览生产版本

```bash
npm run web:preview
```

## 安全提示

⚠️ **重要安全提示**:

- 私钥仅在浏览器本地使用，不会上传到任何服务器
- 建议在安全的环境中使用
- 不要在公共电脑上输入私钥
- 使用完毕后清除浏览器缓存

## 技术栈

- **前端框架**: Vanilla TypeScript
- **构建工具**: Vite
- **区块链 SDK**: @mysten/sui
- **样式**: 纯 CSS（深色主题 + 渐变效果）

## 界面预览

### 配置面板
- 网络选择
- 池子 ID 输入
- 私钥输入（密码框）
- 扫描参数配置

### 进度显示
- 实时进度条
- 扫描状态
- Ticks 计数
- 订单统计
- 日志输出

### 结果展示
- 订单总数
- 过期订单数
- 预计返还金额
- 订单详情列表

### 交易执行
- 执行进度
- 成功/失败统计
- 交易详情
- 实际返还金额

## 目录结构

```
web/
├── index.html      # 主页面
├── styles.css      # 样式文件
├── app.ts          # 应用逻辑
└── tsconfig.json   # TypeScript 配置
```

## 开发说明

### 修改样式

编辑 `web/styles.css`，使用 CSS 变量可以快速调整主题：

```css
:root {
    --primary-color: #6366f1;
    --success-color: #10b981;
    --bg-color: #0f172a;
    /* ... */
}
```

### 修改逻辑

编辑 `web/app.ts`，主要函数：

- `handleScan()` - 处理扫描
- `scanPool()` - 扫描池子
- `handleExecute()` - 执行交易
- `showResults()` - 显示结果

## 注意事项

1. **浏览器兼容性**: 需要支持 ES2020 的现代浏览器
2. **网络连接**: 需要稳定的网络连接到 Sui RPC 节点
3. **Gas 费用**: 执行交易需要支付 Gas 费用
4. **合约接口**: 需要 DeepBook V3 支持公共清理函数

## 故障排除

### 扫描失败

- 检查池子 ID 是否正确
- 确认网络连接正常
- 查看浏览器控制台错误信息

### 交易执行失败

- 检查私钥格式是否正确（Base64）
- 确认账户有足够的 SUI 支付 Gas
- 检查订单是否真的过期

## License

MIT
